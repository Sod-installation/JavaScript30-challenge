<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>JS Drum Kit</title>
        <link rel="stylesheet" href="style.css" />
    </head>
    <body>
        <div class="keys">
            <div data-key="65" class="key">
                <kbd>A</kbd>
                <span class="sound">clap</span>
            </div>
            <div data-key="83" class="key">
                <kbd>S</kbd>
                <span class="sound">hihat</span>
            </div>
            <div data-key="68" class="key">
                <kbd>D</kbd>
                <span class="sound">kick</span>
            </div>
            <div data-key="70" class="key">
                <kbd>F</kbd>
                <span class="sound">openhat</span>
            </div>
            <div data-key="71" class="key">
                <kbd>G</kbd>
                <span class="sound">boom</span>
            </div>
            <div data-key="72" class="key">
                <kbd>H</kbd>
                <span class="sound">ride</span>
            </div>
            <div data-key="74" class="key">
                <kbd>J</kbd>
                <span class="sound">snare</span>
            </div>
            <div data-key="75" class="key">
                <kbd>K</kbd>
                <span class="sound">tom</span>
            </div>
            <div data-key="76" class="key">
                <kbd>L</kbd>
                <span class="sound">tink</span>
            </div>
        </div>

        <audio data-key="65" src="sounds/clap.wav"></audio>
        <audio data-key="83" src="sounds/hihat.wav"></audio>
        <audio data-key="68" src="sounds/kick.wav"></audio>
        <audio data-key="70" src="sounds/openhat.wav"></audio>
        <audio data-key="71" src="sounds/boom.wav"></audio>
        <audio data-key="72" src="sounds/ride.wav"></audio>
        <audio data-key="74" src="sounds/snare.wav"></audio>
        <audio data-key="75" src="sounds/tom.wav"></audio>
        <audio data-key="76" src="sounds/tink.wav"></audio>

        <script>
            const key = document.getElementsByClassName("key");
            const audio = document.querySelectorAll("audio");

            // 배열로 변경
            const arrKey = Array.from(key);
            const key_ = document.getElementsByClassName('key')
            // .getAttribute('data-key');
            console.log(key_[0].getAttribute('data-key'));   // 반복문 사용하기  (25분 소요)

            
            const dataKey = audio.getAttribute('data-key')
            console.log(audio);

            //
            for (let i = 0; i < arrKey.length; i++) {
                arrKey[i].addEventListener("mousedown", () => {
                    arrKey[i].classList.add("playing");
                    audio[i].play();
                });
                arrKey[i].addEventListener("mouseup", () => {
                    arrKey[i].classList.remove("playing");
                });
            }

            // 키보드 눌렀을 때 반응

            // for (let i = 0; i < arrKey.length; i++) {
            //     const keys = arrKey[i].dataset.key;
            //     switch (keys.addEventListener('keydown', )) {
            //         case 65:
            //             audio[i].play();
            //             break;
            //         case
            //     }
            //


            // for (let i = 0; i < arrKey.length; i++) {
            //     arrKey[i].addEventListener("keydown", () => {
            //         arrKey[i].classList.add("playing");
            //         audio[i].play();
            //     });
            //     arrKey[i].addEventListener("keyup", () => {
            //         arrKey[i].classList.remove("playing");
            //     });
            // }
            
            

            //키다운 되었을 때 소리, 불빛 추가
            window.addEventListener("keydown", (e) => {
                console.log(e.keyCode);
                 


                switch (e.keyCode) {
                    case 65: 
                        audio[0].play();
                        arrKey[0].classList.add("playing");
                        // setTimeout(
                        //     () => arrKey[0].classList.remove("playing"),
                        //     200
                        break;
                    case 83:
                        audio[1].play();
                        arrKey[1].classList.add("playing");
                        break;
                    case 68:
                        audio[2].play();
                        arrKey[2].classList.add("playing");
                        break;
                    case 70:
                        audio[3].play();
                        arrKey[3].classList.add("playing");
                        break;
                    case 71:
                        audio[4].play();
                        arrKey[4].classList.add("playing");
                        break;
                    case 72:
                        audio[5].play();
                        arrKey[5].classList.add("playing");
                        break;
                    case 74:
                        audio[6].play();
                        arrKey[6].classList.add("playing");
                        break;
                    case 75:
                        audio[7].play();
                        arrKey[7].classList.add("playing");
                        break;
                    case 76:
                        audio[8].play();
                        arrKey[8].classList.add("playing");
                        break;
                }
            });

            //키업 되었을 때 소리, 불빛 제거
            window.addEventListener("keyup", (e) => {
                console.log(e.keyCode);
                switch (e.keyCode) {
                    case 65:
                        audio[0].play();
                        arrKey[0].classList.remove("playing");
                        break;
                    case 83:
                        audio[1].play();
                        arrKey[1].classList.remove("playing");
                        break;
                    case 68:
                        audio[2].play();
                        arrKey[2].classList.remove("playing");
                        break;
                    case 70:
                        audio[3].play();
                        arrKey[3].classList.remove("playing");
                        break;
                    case 71:
                        audio[4].play();
                        arrKey[4].classList.remove("playing");
                        break;
                    case 72:
                        audio[5].play();
                        arrKey[5].classList.remove("playing");
                        break;
                    case 74:
                        audio[6].play();
                        arrKey[6].classList.remove("playing");
                        break;
                    case 75:
                        audio[7].play();
                        arrKey[7].classList.remove("playing");
                        break;
                    case 76:
                        audio[8].play();
                        arrKey[8].classList.remove("playing");
                        break;
                }
            });
            // 음악 객체(audio)관련 설명
            // https://mjmjmj98.tistory.com/31

            // 클릭 시 소리 발생
            // 클릭 시 색상 (playing 클래스)
            // 클릭 시 박스 크기가 변함 (playing 클래스)
            // 박스 hover 효과
            // 소리가 겹치지 않도록
            // 키보드 keycode: https://blog.outsider.ne.kr/322
        </script>
    </body>
</html>
